<div class="box-content">
  <legend><%= @game_life.live_title%>❤</legend>
  <% if flash[:error] %>
      <div class="alert alert-error">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <%= flash[:error] %>
      </div>
  <% end %>
  <h4 style="text-align: right;color: #ff0000">❤<%= @game_life.live_type %></h4>
  <form action="/game_lives/create_cover" method="post" accept-charset="utf-8" enctype="multipart/form-data">
    <!--enctype="multipart/form-data" 用于自定义上传文件-->
      <div>
        <table>
          <tr>
            <td><input type="text" name="id" value="<%= @game_life.id %>" style="display: none"></td>
          </tr>
          <tr>
            <td><h3>直播封面：</h3></td>
            <td><input type="file" id="imgInp" name="person_cover"  size="19" style="opacity: 0;" accept=".jpg,.gif,.png,.jpeg"></td>
          </tr>
          <tr>
            <td rowspan="2">
              <div class="center" title="上传图片预区">
                <div style="text-align: center;padding-top: 30px"><img id="blah"  style="max-width: 780px;max-height: 390px"/></div>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div class="form-actions">
        <input type="submit" class="btn btn-primary" value="保存">
        <a href="/game_lives" class="btn">取消</a>
      </div>

  </form>
</div>

<script>

    $("#imgInp").change(function(){
        readURL(this);
    });

    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

</script>
